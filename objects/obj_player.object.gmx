<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player_move</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-9</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///creation code

player =0;
hspd = 0;
vspd = 0;
grav = 0.2;
jumpspd = 10;
jumpanim = 0;
maxmspd = 4;
mspd = 4;
image_speed = 0.5;
jumps = 0;
maxjumps = 2;
halt = false;
team = 0; // 0 == blue// 1 == red
punchpower = 0;
nug = noone;
deathtime = 120
icon = instance_create (x,y,obj_icon)
with(icon){
    owner = other.id
}
///Create gun
gun = instance_create(x,y,obj_railgun);
with(gun){
          owner = other.id;
          
}

sprite_collision_mask(sprite_index,0,2,24,78,20,88,1,0);

///Powerups
for(i = 0; i &lt; 5; i++){
    powerup[i] = 0;
    powertimer[i] = 0;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///halt alarm
halt = false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Animation
mask_index = spr_player_move;
sprite_collision_mask(sprite_index,0,2,24,78,20,88,1,0);
if(jumpanim = 0 &amp;&amp; image_index &gt;= 39) image_index = 5;

if (hspd = 0 &amp;&amp; !(sprite_index == spr_player_punch)) image_index = 0;
///TEMPORARY 
if (global.mode == 1) {
image_xscale = sign(hspd);
} else{

    image_xscale = gun.image_yscale;
    if image_xscale = 1 sprite_set_offset(sprite_index,50,50)
    if image_xscale = -1 sprite_set_offset(sprite_index,50,50)
    /*switch(image_xscale){
case 1:  mask_index  = spr_player_mask; break;
case -1: mask_index = spr_player_mask2; break;

}
*/
}
if !(sprite_index == spr_player_punch){
if(jumpanim == 1)&amp;&amp; (image_index &lt;40) image_index = 41;

if (image_index &gt;= 41){
   image_speed = 0.3;
}else{
      image_speed = 0.5;
}
}

switch(team){
             case 1:
                  image_blend = make_color_hsv(255,150,255);
             break;
             case 0:
                  image_blend = make_color_hsv(150,150,255);
             break;


}

 
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Movement
if nug != noone{
   mspd = maxmspd/2
}else{
mspd = maxmspd;
}


hspd = sign(gamepad_axis_value(global.player[player],0))*mspd;
jump = gamepad_button_check_pressed(global.player[player],gp_shoulderl);




///if (place_meeting(x,y+1,parent_platform) or place_meeting(x+1,y,parent_platform) or place_meeting(x-1,y,parent_platform))  jumpanim = 1;
if place_meeting(x,y+1,parent_platform) jumps = 0;
if( vspd &lt; 10 ) vspd += grav; 
if place_meeting(x,y+1,parent_platform) jumpanim = 1;
if((!halt)&amp;&amp;(jumps &lt; maxjumps) &amp;&amp; (jump) &amp;&amp; (place_meeting(x,y+1,parent_platform) or place_meeting(x+2,y,parent_platform) or place_meeting(x-2,y,parent_platform))){
halt = true;
alarm[0] = 45;
vspd = -jumpspd;
jumps++;
}




///Wooo this part is always fun &gt;:(

if place_meeting(x, y + vspd,parent_platform){
    while !place_meeting(x,y+sign(vspd),parent_platform){
    y+= sign(vspd);
    }
    vspd = 0;
    jumpanim =0;
}
if place_meeting(x+ hspd, y ,parent_platform){
    while !place_meeting(x+sign(hspd)*2,y,parent_platform){
    x+= sign(hspd)*2;
    }
    hspd = 0;
}
if place_meeting(x+ hspd, y+vspd ,parent_platform){
    while !place_meeting(x+sign(hspd),y+sign(vspd),parent_platform){
    x+= sign(hspd);
    y+= sign(vspd);
    }
    hspd = 0;
    vspd = 0;
}

x+= hspd;
y+= vspd;


</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Gun

if(gun.visible){
with(gun){
          //shooting
          if(gamepad_button_check(global.player[owner.player],gp_shoulderrb) and (canshoot)){
         audio_play_sound(snd_blast,1,0)
           image_index = 0;
          image_speed = 4;
          bullet = instance_create(x + lengthdir_x(88-17,image_angle) ,y +(-8)+ lengthdir_y((88-17),image_angle),obj_bullet)
          canshoot = false
          alarm[0] = rldspd;
          with(bullet){
          player = other.owner.player;
          owner = other.id
                       direction = other.image_angle
                       image_angle = direction;
                       speed = 12;
                       image_index = other.owner.team;
                       team = image_index;
                       
                       
                       
          }
          
          }
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Powerups

if(powerup[0]){

    powertimer[0]++
    gun.rldspd = 10;
    if(powertimer[0] &gt;=(60*5)) powerup[0] = false;
}else{
    gun.rldspd = gun.maxrldspd
}

if (powerup[1]){    ///speed
    powertimer[1]++
    maxmspd = 8;
    if(powertimer[1] &gt;=(60*7)) powerup[1] = false;
}else{
    maxmspd = 4;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///NuggetCode
if gamepad_button_check_pressed(global.player[player],gp_face3){
   if nug != noone {
      with(nug){
      owner = noone
      alarm[0] = 120;
      cancollide = false;
      
      }
      nug = noone;
   }
}

if nug != noone or sprite_index == spr_player_punch {gun.visible = false} else{gun.visible = true;}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///punch
var num = 2
if gamepad_button_check(global.player[player],gp_shoulderr) and nug == noone{
    if punchpower + 1 &lt;= num*12 punchpower++;
   sprite_index = spr_player_punch;
   if image_index &lt; 13 and sprite_index == spr_player_punch image_index = punchpower div num;
  
}


if gamepad_button_check_released(global.player[player],gp_shoulderr){
   if image_index &gt;= 12{ image_speed = 0.7; show_debug_message("Should work no?")} else{sprite_index = spr_player_move}
   punchpower = 0;
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="parent_hazzard">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_bloodcode(x,y,800,team);
   control_players.alarm[player] = deathtime;
   with(gun){instance_destroy()}
   instance_destroy()
   scr_dropnug();
     audio_play_sound(snd_death,1,0)
   with(icon){instance_destroy()}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if other.team != team{
   ///Death Code
   global.kills[other.player] += 1;
   scr_bloodcode(x,y,800,team);
   control_players.alarm[player] = deathtime;
   with(gun){instance_destroy()}
   instance_destroy();
   with(other){instance_destroy()}
   scr_dropnug();
   audio_play_sound(snd_death,1,0)
   with(icon){instance_destroy()}
   
   
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_player">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(other.sprite_index == spr_player_punch and other.image_index &gt;= 14 &amp;&amp; other.team != team){
scr_bloodcode(x,y,800,team);
global.kills[other.player]++;
   control_players.alarm[player] = deathtime;
   with(gun){instance_destroy()}
   instance_destroy()
   scr_dropnug();
   audio_play_sound(snd_punch,1,0)
   audio_play_sound(snd_death,1,0)
   with(icon){instance_destroy()}
   
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="40">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_bloodcode(x,y,800,team);
   control_players.alarm[player] = deathtime;
   with(gun){instance_destroy()}
   instance_destroy()
   scr_dropnug();
   with(icon){instance_destroy()}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_bloodcode(x,y,800,team);
   control_players.alarm[player] = deathtime;
   with(gun){instance_destroy()}
   instance_destroy()
   scr_dropnug();
     audio_play_sound(snd_death,1,0)
   with(icon){instance_destroy()}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if sprite_index == spr_player_punch{
   sprite_index = spr_player_move;
   show_debug_message("anim ended");
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///REMOVE
draw_self();

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*///YOU KNOW I HAD TO DO IT TO EM
scr_bloodcode(x,y,800,team);
   control_players.alarm[player] = deathtime;
   with(gun){instance_destroy()}
   instance_destroy()
   scr_dropnug();
   with(icon){instance_destroy()}
   
   */
   
event_user(0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>51,49</point>
    <point>51,51</point>
  </PhysicsShapePoints>
</object>
